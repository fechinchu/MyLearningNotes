# Education项目总结09-课程预览

# 1.课程预览技术方案

## 1.1.技术需求

课程详情页面是向用户展示课程信息的窗口,本页面的访问量会很大.此页面的内容涉及不仅要展示出课程核心重要的内容而且用户访问页面的**速度**要有保证.另一个需求就是SEO,要非常有利于爬虫抓取页面上的信息,并且生成页面快照,利于用户通过搜索引擎搜索课程信息.

## 1.2.课程详情技术方案

### 1.2.1.方案一

![image-20200512205150291](https://fechin-leyou.oss-cn-beijing.aliyuncs.com/PicGo/image-20200512205150291.png)

此页面为动态页面,我能不能直接去查询数据库然后渲染前端页面进行访问.答案是不行,这样是不能很好的支持SEO

### 1.2.2.方案二

对于不会频繁改变的信息可以采用页面静态化的技术,提前让页面生成html静态页面存储在Nginx服务器,用户直接访问Nginx即可,对于一些动态信息可以访问服务端获取json数据在页面渲染

![image-20200512205730971](https://fechin-leyou.oss-cn-beijing.aliyuncs.com/PicGo/image-20200512205730971.png)

## 1.3.课程预览技术方案

根据要求,课程详情页面采用静态化技术生成HTML页面,课程预览的效果要与最终静态化的HTML页面一致.所以,课程预览功能也采用静态化技术生成HTML页面,课程预览使用的模板也课程详情页面模板一致,这样就可以保证课程预览效果与最终课程详情页面的效果一致.

![image-20200512210927151](https://fechin-leyou.oss-cn-beijing.aliyuncs.com/PicGo/image-20200512210927151.png)

# 2.课程详情页面静态化(略)

# 3.课程预览功能开发

![image-20200521210103979](https://fechin-leyou.oss-cn-beijing.aliyuncs.com/PicGo/image-20200521210103979.png)

## 3.1.需求分析

课程预览功能将使用cms系统提供的页面预览功能:

1. 用户进入课程管理页面,点击课程预览,请求到课程管理服务;
2. 课程管理服务远程调用cms添加页面接口向cms添加课程详情页面;
3. 课程管理服务得到cms返回课程详情页面id,并拼接成课程预览Url;
4. 课程管理服务将课程预览Url给前端返回;
5. 用户在前端页面请求课程预览Url,打开新窗口显示课程详情内容;

![image-20200512234726663](https://fechin-leyou.oss-cn-beijing.aliyuncs.com/PicGo/image-20200512234726663.png)

CMS永远都是根据页面cms_page这个表里面的id来实行页面静态化来实现预览;

我们在预览的时候实际上是在cms_page之后返回一个课程预览URL,该URL中包含cms_page的id,那么就会根据该请求路径来请求cms端来生成页面静态化内;

